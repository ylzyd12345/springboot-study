spring:
  application:
    name: spring4demo

  # Seata 配置（测试时禁用）
  seata:
    enabled: false

  # 数据源配置
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:
    # 动态数据源配置
    dynamic:
      enabled: true
      strict: false
      primary: master
      datasource:
        master:
          name: master
          driver-class-name: org.h2.Driver
          url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
          username: sa
          password:

  # H2 控制台配置（测试时启用）
  h2:
    console:
      enabled: true
      path: /h2-console

  # Redis 配置（测试时使用嵌入式 Redis 或 Mock）
  data:
    redis:
      host: localhost
      port: 6379
      database: 1

  # Web 配置
  web:
    resources:
      add-mappings: false

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# 日志配置
logging:
  level:
    root: INFO
    com.kev1n.spring4demo: DEBUG
    com.baomidou.mybatisplus: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Sa-Token 配置
sa-token:
  token-name: satoken
  timeout: 2592000
  active-timeout: -1
  is-concurrent: true
  is-share: false
  token-style: uuid
  is-log: false
  is-print-error: true
  jwt-secret-key: abcdefghijklmnopqrstuvwxyz

# RustFS 配置（测试时使用 Mock）
rustfs:
  endpoint: http://localhost:9000
  access-key: admin
  secret-key: admin123
  bucket-name: test-bucket
  region: us-east-1
  path-style-access: true
  max-file-size: 10
  max-request-size: 100

# KKFileView 配置（测试时使用 Mock）
kkfileview:
  server-url: http://localhost:8012
  preview-path: /onlinePreview
  use-cache: false
  cache-expire-time: 3600
  current-server-url: http://localhost:8080
  force-update-cache: true

# 监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true

# API 文档配置
springdoc:
  api-docs:
    enabled: false
  swagger-ui:
    enabled: false

# Knife4j 配置
knife4j:
  enable: false
  production: true