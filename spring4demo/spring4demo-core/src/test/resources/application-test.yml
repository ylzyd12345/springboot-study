spring:
  application:
    name: spring4demo

  # 数据源配置
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:
    # 初始化脚本
    # 动态数据源配置（测试时禁用）
    dynamic:
      enabled: false
      primary: master
      datasource:
        master:
          url: jdbc:h2:mem:testdb
          username: sa
          password:

  # H2 控制台配置（测试时启用）
  h2:
    console:
      enabled: true
      path: /h2-console

  # Redis 配置（测试时使用嵌入式 Redis 或 Mock）
  data:
    redis:
      host: localhost
      port: 6379
      database: 1
    # Redisson 配置（测试时禁用）
    redisson:
      enabled: false
      file: classpath:redisson-test.yaml
  sql:
    init:
      schema-locations: classpath:db/schema.sql

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# 日志配置
logging:
  level:
    root: INFO
    com.kev1n.spring4demo: DEBUG
    com.baomidou.mybatisplus: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Sa-Token 配置
sa-token:
  token-name: satoken
  timeout: 2592000
  active-timeout: -1
  is-concurrent: true
  is-share: false
  token-style: uuid
  is-log: false
  is-print-error: true
  jwt-secret-key: abcdefghijklmnopqrstuvwxyz

# RustFS 配置（测试时使用 Mock）
rustfs:
  endpoint: http://localhost:9000
  access-key: admin
  secret-key: admin123
  bucket-name: test-bucket
  region: us-east-1
  path-style-access: true
  max-file-size: 10
  max-request-size: 100

# XXL-Job 配置（测试时禁用）
xxl:
  job:
    admin:
      addresses: http://localhost:8080/xxl-job-admin
      accessToken: default_token
    executor:
      appname: spring4demo-executor
      address:
      ip:
      port: 9999
      logpath: /data/applogs/xxl-job/jobhandler
      logretentiondays: 30

# Seata 配置（测试时禁用）
seata:
  enabled: false
  application-id: spring4demo
  tx-service-group: spring4demo-tx-group
  service:
    vgroup-mapping:
      spring4demo-tx-group: default
    grouplist:
      default: 127.0.0.1:8091

# 监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true